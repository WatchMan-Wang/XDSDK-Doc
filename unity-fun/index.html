<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/XDSDK-Doc/blog/rss.xml" title="XDSDK 文档中心 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/XDSDK-Doc/blog/atom.xml" title="XDSDK 文档中心 Blog Atom Feed"><title data-react-helmet="true">Unity功能介绍 | XDSDK 文档中心</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Unity功能介绍 | XDSDK 文档中心"><meta data-react-helmet="true" name="description" content="1.登录"><meta data-react-helmet="true" property="og:description" content="1.登录"><meta data-react-helmet="true" property="og:url" content="https://xindong.github.io/XDSDK-Doc/unity-fun"><link data-react-helmet="true" rel="shortcut icon" href="/XDSDK-Doc/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://xindong.github.io/XDSDK-Doc/unity-fun"><link rel="stylesheet" href="/XDSDK-Doc/styles.919d3e7a.css">
<link rel="stylesheet" href="/XDSDK-Doc/main.c62259f1.css">
<link rel="preload" href="/XDSDK-Doc/styles.a5854f72.js" as="script">
<link rel="preload" href="/XDSDK-Doc/runtime~main.72e88344.js" as="script">
<link rel="preload" href="/XDSDK-Doc/main.a5c3613a.js" as="script">
<link rel="preload" href="/XDSDK-Doc/1.b40f6164.js" as="script">
<link rel="preload" href="/XDSDK-Doc/2.80b3cede.js" as="script">
<link rel="preload" href="/XDSDK-Doc/18.91ec36ce.js" as="script">
<link rel="preload" href="/XDSDK-Doc/935f2afb.1fa45139.js" as="script">
<link rel="preload" href="/XDSDK-Doc/17896441.71c54e3f.js" as="script">
<link rel="preload" href="/XDSDK-Doc/21ab16bf.5629c7b7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/XDSDK-Doc/"><img src="/XDSDK-Doc/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/XDSDK-Doc/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">XDSDK</strong></a><a class="navbar__item navbar__link" href="/XDSDK-Doc/docs/">XDSDK</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xindong/XDSDK-Doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/XDSDK-Doc/"><img src="/XDSDK-Doc/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/XDSDK-Doc/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">XDSDK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/XDSDK-Doc/docs/">XDSDK</a></li><li class="menu__list-item"><a href="https://github.com/xindong/XDSDK-Doc" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Unity功能介绍</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1登录"></a>1.登录<a class="hash-link" href="#1登录" title="Direct link to heading">#</a></h2><ul><li><p>XDSDK 2.3.0开始，支持游戏自定义登录入口。入口素材联系平台提供</p></li><li><p>游戏自行绘制登录按钮，分别出发下面的登录事件</p></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 自动登录（若有上次登录记录，则会直接登录）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static bool AutoLogin()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// TapTap登录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void TapTapLogin()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 苹果登录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void AppleLogin()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 游客登录</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void GuestLogin()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><span style="color:#f00;padding:0.2rem">由于苹果审核要求，iOS13 显示第三方登录的同时必须显示苹果登录(建议位置靠前)</span><p>调用该接口会触发下列回调</p><span style="color:#f00;padding:0.2rem">获取、查看用户信息以及支付接口请在获取到登录成功回调之后调用。</span><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>登录成功</td><td>void OnLoginSucceed(string token)</td></tr><tr><td>登录失败</td><td>void OnLoginFailed(string msg)</td></tr><tr><td>登录取消</td><td>void OnLoginCanceled()</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">XDSDK 4.2.0之后，新版用户中心显示角色信息，需要额外调用接口设置角色信息</span><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2设置角色"></a>2.设置角色<a class="hash-link" href="#2设置角色" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">角色登录成功之后，设置当前角色信息；角色登出后，清空当前角色信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">```</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void SetRole(string roleId,string roleName,string roleAvatar)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void ClearRole()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">```</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3获取access-token"></a>3.获取Access Token<a class="hash-link" href="#3获取access-token" title="Direct link to heading">#</a></h2><p>调用该接口获取当前登录用户的access token。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static string GetAccessToken()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码"></a>示例代码<a class="hash-link" href="#示例代码" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.GetAccessToken()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4获取当前登录状态"></a>4.获取当前登录状态<a class="hash-link" href="#4获取当前登录状态" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static bool IsLoggedIn()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-1"></a>示例代码<a class="hash-link" href="#示例代码-1" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.IsLoggedIn()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5打开用户中心"></a>5.打开用户中心<a class="hash-link" href="#5打开用户中心" title="Direct link to heading">#</a></h2><p>调用该接口打开用户中心界面，用户可以在该界面进行登出和登录操作，游戏注意正确处理回调。在未登录状态，无法打开用户中心。在用户中心中，用户可进行登出操作，此时交互界面将消失。游戏需要提供引导用户重新进行登录的操作界面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* @return false表示尚未登录，重复调用默认为成功</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static bool OpenUserCenter()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-2"></a>示例代码<a class="hash-link" href="#示例代码-2" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.OpenUserCenter()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6发起支付"></a>6.发起支付<a class="hash-link" href="#6发起支付" title="Direct link to heading">#</a></h2><span style="color:#f00;padding:0.2rem">不保证在任何情况下都能收到回调，请勿直接使用SDK返回的支付结果作为最终判定订单状态的依据。 为了收到支付回调，需要在应用启动后就设置好支付相关功能。</span><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="61发起支付"></a>6.1发起支付<a class="hash-link" href="#61发起支付" title="Direct link to heading">#</a></h3><p>调用该接口发起支付。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* @param info 支付相关信息，注意key和value都是字符串类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static bool Pay(Dictionary&lt;string, string&gt; info)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>其中info的字段如下。</p><table><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>Product_Name</td><td>是</td><td>商品名称，建议以游戏名称开头，方便财务对账</td></tr><tr><td>Product_Id</td><td>是</td><td>商品ID</td></tr><tr><td>Product_Price</td><td>是</td><td>商品价格（单位分）</td></tr><tr><td>Sid</td><td>是</td><td>所在服务器ID，不能有特殊字符，服务端支付回调会包含该字段</td></tr><tr><td>Role_Id</td><td>是</td><td>支付角色ID，服务端支付回调会包含该字段</td></tr><tr><td>OrderId</td><td>否</td><td>游戏侧订单号，服务端支付回调会包含该字段</td></tr><tr><td>EXT</td><td>否</td><td>额外信息，最长512个字符，服务端支付回调会包含该字段。可用于标记区分充值回调地址，如需使用该功能，请联系平台进行配置。#### 示例代码：info.Add(&quot;EXT&quot;, &quot;{\&quot;payCallbackCode\&quot;:2}&quot;);</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="62恢复支付"></a>6.2恢复支付<a class="hash-link" href="#62恢复支付" title="Direct link to heading">#</a></h3><span style="color:#f00;padding:0.2rem">恢复支付逻辑，SDK 4.0.1(iOS)之后添加。</span>优化前：<p>在玩家第一笔掉单时，SDK 一直处于等待接收收据的状态，此时，
用户一直在游戏中，苹果随时可能发送收据给 SDK，一旦发送，SDK 就会通知游戏发送道具；
用户关闭游戏（杀进程或退后台），此时 SDK 不再接收苹果收据。导致即使这期间如果苹果有发送收据来，SDK 也收不到。除非玩家第二次充值，苹果会连同上一笔未完成订单一次性发送，造成玩家同时收到两笔道具的情况。</p><p>优化后：</p><p>当玩家再次打开游戏，SDK 再次向苹果请求一次收据信息。如有掉单的收据，且玩家登录成功后，则通知游戏，游戏来收到通知后来决定是否要补发道具。</p><span style="color:#f00;padding:0.2rem">游戏内购流程图：</span><span style="color:#f00;padding:0.2rem">注意: 如果有遗留未完成订单，在接收到恢复订单回调后，(若单个用户可能拥有多个账号，可以请求用户确认后）调用恢复订单接口。</span><p>说明：</p><p>在掉单的情况下，SDK只能获取订单的基本信息，如商品ID、苹果侧订单ID（非游戏生成order_id）和商品数量，不能直接对应到用户，所以无法直接兑换商品。</p><p>游戏在收到掉单回调之后，可以弹窗请用户确认是否需要恢复商品，如需要，则用回调提供的已有参数，加上其他需要的参数，如角色ID，服务器ID等，使用恢复订单接口恢复该商品。</p><span style="color:#f00;padding:0.2rem">SDK会提供测试包，供游戏使用沙盒测试（购买之后会造成掉单），游戏调用恢复接口如果成功到账则为测试成功。</span><p>游戏内弹窗示例(文案做相应修改)：</p><p>回调方法</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// 有未完成的订单回调，比如：礼包码.注意：多个未完成订单会在一个数组中一起回调。（只会在登录状态下回调）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// @param resultList 订单信息List。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// 单个未完成订单信息包含：     TransactionIdentifier ：订单标识 ，恢复购买时需要回传</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">///                                    Product_Id ：商品ID，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">///                                        Quantity：商品数量</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public override void RestoredPayment(List&lt;Dictionary&lt;string,string&gt;&gt; resultList){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="63恢复订单"></a>6.3恢复订单<a class="hash-link" href="#63恢复订单" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* @param info 支付相关信息，注意key和value都是字符串类型</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static bool RestorePay(Dictionary&lt;string, string&gt; info)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>其中info的字段如下。</p><table><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>TransactionIdentifier</td><td>是</td><td>需要恢复的订单标识，SDK恢复订单回调中包含</td></tr><tr><td>Product_Name</td><td>是</td><td>商品名称，建议以游戏名称开头，方便财务对账</td></tr><tr><td>Product_Id</td><td>是</td><td>商品ID，到AppStore购买的商品</td></tr><tr><td>Product_Price</td><td>是</td><td>商品价格（单位分），对于AppStore支付，该字段没有用处，但是需要传递真实金额，有多处需要用到</td></tr><tr><td>Sid</td><td>是</td><td>所在服务器ID，不能有特殊字符，服务端支付回调会包含该字段</td></tr><tr><td>Role_Id</td><td>是</td><td>支付角色ID，服务端支付回调会包含该字段</td></tr><tr><td>OrderId</td><td>否</td><td>游戏侧订单号，服务端支付回调会包含该字段</td></tr><tr><td>EXT</td><td>否</td><td>额外信息，最长512个字符，服务端支付回调会包含该字段。可用于标记区分充值回调地址，如需使用该功能，请联系平台进行配置。#### 示例代码：[prdInfo setObject:@&quot;{\&quot;payCallbackCode\&quot;:1}&quot; forKey:@&quot;EXT&quot;];</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="64支付结果"></a>6.4支付结果<a class="hash-link" href="#64支付结果" title="Direct link to heading">#</a></h3><p>调用发起支付和恢复支付接口会触发下列回调。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>支付完成</td><td>public void OnPayCompleted()</td></tr><tr><td>支付失败</td><td>public void OnPayFailed(string msg)</td></tr><tr><td>支付取消</td><td>public void OnPayCanceled()</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="65示例代码"></a>6.5示例代码<a class="hash-link" href="#65示例代码" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dictionary&lt;string, string&gt; info = new Dictionary&lt;string,string&gt;();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;OrderId&quot;, &quot;1234567890123456789012345678901234567890&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;Product_Price&quot;, &quot;1&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;EXT&quot;, &quot;abcd|efgh|1234|5678&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;Sid&quot;, &quot;2&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;Role_Id&quot;, &quot;3&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;Product_Id&quot;, &quot;4&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;Product_Name&quot;, &quot;648大礼包&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">info.Add(&quot;EXT&quot;, &quot;{\&quot;payCallbackCode\&quot;:2}&quot;);（）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.Pay (info);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7登出"></a>7.登出<a class="hash-link" href="#7登出" title="Direct link to heading">#</a></h2><p>需要注销当前登录用户时调用，该操作不会出现登录界面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void Logout()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>登出成功</td><td>public void OnLogoutSucceed()</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-3"></a>示例代码<a class="hash-link" href="#示例代码-3" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.Logout();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="8游客升级"></a>8.游客升级<a class="hash-link" href="#8游客升级" title="Direct link to heading">#</a></h2><p>当游客账号升级成功时,会触发下列回调。<br>
后续如需使用token，务必使用回调给的新token。但已生效的会话无需处理。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>游客升级成功</td><td>public void OnGuestBindSucceed(string token)</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="9退出"></a>9.退出<a class="hash-link" href="#9退出" title="Direct link to heading">#</a></h2><p>调用该方法时，弹出确认框供用户选择是否退出。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void Exit()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-4"></a>示例代码<a class="hash-link" href="#示例代码-4" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.Exit();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>确认退出</td><td>public void OnExitConfirm()</td></tr><tr><td>取消退出</td><td>public void OnExitCancel()</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="10微信分享"></a>10.微信分享<a class="hash-link" href="#10微信分享" title="Direct link to heading">#</a></h2><span style="color:#f00;padding:0.2rem">微信分享功能即将停止维护，建议单独接入</span><p>调用心动SDK的微信分享功能。</p><p>参数说明</p><table><thead><tr><th>通用参数</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>text</td><td>否</td><td>string</td><td>分享文字内容</td></tr><tr><td>bText</td><td>是</td><td>string</td><td>分享内容是否为多媒体内容（1文本内容，0多媒体内容）</td></tr><tr><td>scene</td><td>是</td><td>string</td><td>分享场景（SESSION对话，TIMELINE朋友圈，FAVOURITE收藏）</td></tr><tr><td>shareType</td><td>是</td><td>string</td><td>分享类型（TEXT，IMAGE，MUSIC，VIDEO，WEB）</td></tr><tr><td>title</td><td>否</td><td>string</td><td>分享标题</td></tr><tr><td>description</td><td>否</td><td>string</td><td>分享描述信息</td></tr><tr><td>thumbPath</td><td>否</td><td>string</td><td>缩略图路径 （安卓不支持Url，请填写文件路径。）</td></tr><tr><td>meidaTagName</td><td>否</td><td>string</td><td></td></tr><tr><td>messageExt</td><td>否</td><td>string</td><td></td></tr><tr><td>messageAction</td><td>否</td><td>string</td><td></td></tr></tbody></table><p>以下参数，请根据不同的分享类型（shareType参数）进行设置</p><table><thead><tr><th>图片分享</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>imageUrl</td><td>是</td><td>string</td><td>分享图片Url （安卓不支持Url，请填写文件路径）</td></tr></tbody></table><table><thead><tr><th>音乐分享</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>musicUrl</td><td>是</td><td>string</td><td>音乐链接 （请填写音乐路径。例：<a href="https://www.xd.com/music.mp3%EF%BC%89" target="_blank" rel="noopener noreferrer">https://www.xd.com/music.mp3）</a></td></tr><tr><td>musicLowBandUrl</td><td>否</td><td>string</td><td>低带宽音乐链接</td></tr><tr><td>musicDataUrl</td><td>否</td><td>string</td><td>音乐数据链接</td></tr><tr><td>musicLowBandDataUrl</td><td>否</td><td>string</td><td>低带宽状音乐数据链接</td></tr></tbody></table><table><thead><tr><th>视频分享</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>videoUrl</td><td>是</td><td>string</td><td>视频链接</td></tr><tr><td>videoLowBandUrl</td><td>否</td><td>string</td><td>低带宽视频链接</td></tr></tbody></table><table><thead><tr><th>网页分享参数</th><th>是否必须</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>webpageUrl</td><td>是</td><td>string</td><td>网页链接</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-5"></a>示例代码<a class="hash-link" href="#示例代码-5" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">//分享文字</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;);  //标题</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;text&quot;, &quot;***text***&quot;); //内容</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;); //scene场景值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;TEXT&quot;);  //分享类型 文字</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//分享图片</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;);  //标题</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;);  //描述</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;imageUrl&quot;, &quot;/storage/emulated/0/2.png&quot;); //图片路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;); //scene场景值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;IMAGE&quot;);  //分享类型 图片</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//分享音乐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;); //标题</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;musicUrl&quot;, &quot;http://staff2.ustc.edu.cn/~wdw/softdown/index.asp/0042515_05.ANDY.mp3&quot;);  //音乐url</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;);  //scene场景值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;MUSIC&quot;);  //分享类型 音乐</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//分享视频</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;); //标题</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;videoUrl&quot;, &quot;https://www.xd.com&quot;);  //视频url</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;);  //scene场景值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;VIDEO&quot;);  //分享类型 视频</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//分享网页</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dictionary&lt;string, string&gt; content = new Dictionary&lt;string, string&gt; ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;title&quot;, &quot;***title***&quot;); //标题</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;description&quot;, &quot;***description***&quot;); //描述</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;thumbPath&quot;, &quot;/storage/emulated/0/2.png&quot;); //预览图路径</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;webpageUrl&quot;, &quot;https://www.xd.com&quot;);  //视频url</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;scene&quot;, &quot;SESSION&quot;);  //scene场景值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">content.Add (&quot;shareType&quot;, &quot;WEB&quot;);  //分享类型 网页</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">xdsdk.XDSDK.Share (content);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用分享接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>分享成功</td><td>public void OnWXShareSucceed()</td></tr><tr><td>分享失败</td><td>public void OnWXShareFailed(string msg)</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">注意：分享过程中，若用户选择留在微信，则不会产生分享回调。游戏不应当完全依赖分享回调。</span><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="11实名认证"></a>11.实名认证<a class="hash-link" href="#11实名认证" title="Direct link to heading">#</a></h2><p>调用该方法时，弹出实名认证窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void OpenRealName()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-6"></a>示例代码<a class="hash-link" href="#示例代码-6" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.OpenRealName();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>确认退出</td><td>public void OnRealNameSucceed()</td></tr><tr><td>取消退出</td><td>public void OnRealNameFailed(string error_msg)</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">注意：实名认证结果以服务端authoriz_state参数为准（见4.1）。</span><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="12游客绑定"></a>12.游客绑定<a class="hash-link" href="#12游客绑定" title="Direct link to heading">#</a></h2><p>调用该方法时，弹出游客绑定窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void OpenUserBindView()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-7"></a>示例代码<a class="hash-link" href="#示例代码-7" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.OpenUserBindView ();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>成功</td><td>public void OnGuestBindSucceed (string token)</td></tr><tr><td>失败</td><td>public void OnGuestBindFailed(string msg)</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="13客服"></a>13.客服<a class="hash-link" href="#13客服" title="Direct link to heading">#</a></h2><p>调用该方法时，弹出客服窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void UserFeedback()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-8"></a>示例代码<a class="hash-link" href="#示例代码-8" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.UserFeedback();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="14tapdb"></a>14.TapDB<a class="hash-link" href="#14tapdb" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void SetLevel(int level)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void SetServer(string server)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-9"></a>示例代码<a class="hash-link" href="#示例代码-9" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.SetLevel(100);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.SetServer(&quot;xxxxxxx&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>PS：为了在Android平台跟踪玩家的游戏次数和时长，需要在游戏的每个Activity的onResume和onStop中添加对应的调用。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 安卓</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void OnResume();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void OnStop();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="示例代码-10"></a>示例代码<a class="hash-link" href="#示例代码-10" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 安卓</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.OnResume();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XDSDK.OnStop();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><span style="color:#f00;padding:0.2rem">注意：</span><ol><li>新版本SDK中，已经集成了TapDB的onStart、setUser方法，游戏客户端不需要再重复集成。  </li><li>提供了setLevel，setServer方法供游戏调用，充值统计由服务端完成。  </li><li>已接入TapDB的游戏在集成SDK时仅需要移除onStart和setUser方法，其余保持不变。  </li><li>尚未接入TapDB的游戏，可根据需要自行接入SDK中尚未包含的TapDB SDK的其他方法。  </li><li>如果需要自行接入TapDB，请在SDK初始化方法中enableTapDB参数填写false。  </li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="15taptap论坛"></a>15.TapTap论坛<a class="hash-link" href="#15taptap论坛" title="Direct link to heading">#</a></h2><p>导入<code>namespace com.taptap.sdk</code></p><p>打开论坛</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">appid 游戏论坛ID，与TapTap开发者ID不同</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void OpenTapTapForum(string appid)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">TapTapSDK.Instance.OpenTapTapForum(&quot;123&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="16xdlive直播"></a>16.XDLive直播<a class="hash-link" href="#16xdlive直播" title="Direct link to heading">#</a></h2><p>XDSDK中包含了游戏直播相关组件。</p><p>开通步骤：</p><p>1.联系XDSDK相关人员开通，获取appid和授权直播源管理后台。</p><p>2.接口</p><p>打开论坛</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// appid: 申请到的appid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void OpenXDLive(string appid);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// appid: 申请到的appid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//   uri: 自定义地址</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void OpenXDLive(string appid,string uri);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//       appid: 申请到的appid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//         uri: 自定义地址</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// orientation: 指定屏幕方向（支持竖屏游戏强制设置横屏）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void OpenXDLive(string appid,string uri,int orientation);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">com.xdsdk.xdlive.XDLive.Instance.OpenXDLive(&quot;123&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>设置直播相关事件回调：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void SetCallback(XDLiveCallback callback)；</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>回调方法：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 直播打开</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public override void OnXDLiveOpen();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 直播关闭</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public override void OnXDLiveClosed();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="17防沉迷"></a>17.防沉迷<a class="hash-link" href="#17防沉迷" title="Direct link to heading">#</a></h2><p>unity 2.3.0版本优化防沉迷，支持单机游戏和联网游戏。
提供停止计时和恢复计时接口。游戏根据需求自行调用。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void GameStop();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static void GameResume ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="18打开协议页面"></a>18.打开协议页面<a class="hash-link" href="#18打开协议页面" title="Direct link to heading">#</a></h2><p>游戏需要打开协议的内容时，可以调用该接口，示例如下：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">xdsdk.XDSDK.OpenProtocol(xdsdk.XDSDK.ProtocolType.PROTOCOL_TYPE_GAME);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参数为协议类型，包括  PROTOCOL_TYPE_USER(用户协议),PROTOCOL_TYPE_GAME(游戏协议),PROTOCOL_TYPE_PRIVACY(隐私协议)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="19地区判断"></a>19.地区判断<a class="hash-link" href="#19地区判断" title="Direct link to heading">#</a></h2><p>心动SDK提供地区判断</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using TDSCommon;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TDSCommon.TDSCommon.GetRegionCode((isMainland)=&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    //true 大陆 false 非大陆</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1登录" class="table-of-contents__link">1.登录</a></li><li><a href="#2设置角色" class="table-of-contents__link">2.设置角色</a></li><li><a href="#3获取access-token" class="table-of-contents__link">3.获取Access Token</a></li><li><a href="#4获取当前登录状态" class="table-of-contents__link">4.获取当前登录状态</a></li><li><a href="#5打开用户中心" class="table-of-contents__link">5.打开用户中心</a></li><li><a href="#6发起支付" class="table-of-contents__link">6.发起支付</a><ul><li><a href="#61发起支付" class="table-of-contents__link">6.1发起支付</a></li><li><a href="#62恢复支付" class="table-of-contents__link">6.2恢复支付</a></li><li><a href="#63恢复订单" class="table-of-contents__link">6.3恢复订单</a></li><li><a href="#64支付结果" class="table-of-contents__link">6.4支付结果</a></li></ul></li><li><a href="#7登出" class="table-of-contents__link">7.登出</a></li><li><a href="#8游客升级" class="table-of-contents__link">8.游客升级</a></li><li><a href="#9退出" class="table-of-contents__link">9.退出</a></li><li><a href="#10微信分享" class="table-of-contents__link">10.微信分享</a></li><li><a href="#11实名认证" class="table-of-contents__link">11.实名认证</a></li><li><a href="#12游客绑定" class="table-of-contents__link">12.游客绑定</a></li><li><a href="#13客服" class="table-of-contents__link">13.客服</a></li><li><a href="#14tapdb" class="table-of-contents__link">14.TapDB</a></li><li><a href="#15taptap论坛" class="table-of-contents__link">15.TapTap论坛</a></li><li><a href="#16xdlive直播" class="table-of-contents__link">16.XDLive直播</a></li><li><a href="#17防沉迷" class="table-of-contents__link">17.防沉迷</a></li><li><a href="#18打开协议页面" class="table-of-contents__link">18.打开协议页面</a></li><li><a href="#19地区判断" class="table-of-contents__link">19.地区判断</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/XDSDK-Doc/styles.a5854f72.js"></script>
<script src="/XDSDK-Doc/runtime~main.72e88344.js"></script>
<script src="/XDSDK-Doc/main.a5c3613a.js"></script>
<script src="/XDSDK-Doc/1.b40f6164.js"></script>
<script src="/XDSDK-Doc/2.80b3cede.js"></script>
<script src="/XDSDK-Doc/18.91ec36ce.js"></script>
<script src="/XDSDK-Doc/935f2afb.1fa45139.js"></script>
<script src="/XDSDK-Doc/17896441.71c54e3f.js"></script>
<script src="/XDSDK-Doc/21ab16bf.5629c7b7.js"></script>
</body>
</html>